{% extends 'base.html' %}

{% block header %}
  <h1 class="text-2xl font-bold mb-4">{% block title %}Eagle Eye{% endblock %}</h1>
{% endblock %}

{% block content %}
<style>
  #loading {
      display: none;
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0,0,0,0.5);
      z-index: 2;
      text-align: center;
  }
  #loading img {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
  }
</style>
<script>
  function showLoading() {
      document.getElementById('loading').style.display = 'block';
  }
</script>
  <div class="bg-white p-6 rounded-lg shadow-lg w-96">
    <h2 class="text-2xl font-bold mb-4">Upload a Song</h2>
    <form action="/submit-song" method="POST" enctype="multipart/form-data" class="space-y-4" onsubmit="showLoading()">
        <div>
            <label class="block text-gray-700 text-sm font-bold mb-2" for="song">
                Choose a song file:
            </label>
            <input type="file" name="song" id="song" accept="audio/*" class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        <button type="submit" class="w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
            Upload
        </button>
    </form>
    <div id="loading">
      <img src="https://i.gifer.com/ZZ5H.gif" alt="Loading...">
    </div>
  </div>
  {{ data|safe }}
{% endblock %}